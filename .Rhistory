knitr::opts_chunk$set(echo = TRUE)
Sys.setlocale("LC_CTYPE", "chinese")
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
knitr::opts_chunk$set(echo = TRUE)
Sys.setlocale("LC_CTYPE", "chinese")
packages = c("sp","sf","tidyverse","tmap","=jsonlite", "rgdal", "geojsonio", "GISTools")
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
# Check for NA values for coordinates
sum(is.na(df_dengue$Minimum_statistical_area_center_point_X))
library(rjson)
df_dengue <- jsonlite::fromJSON("data/dengue_case.json")
str(df_dengue)
# Check for NA values for coordinates
sum(is.na(df_dengue$Minimum_statistical_area_center_point_X))
sum(is.na(df_dengue$Minimum_statistical_area_center_point_Y))
df_dengue<- df_dengue[!is.na(df_dengue$Minimum_statistical_area_center_point_X),]
df_dengue<- df_dengue[!(df_dengue$Minimum_statistical_area_center_point_X == 'None'),]
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
str(df_dengue)
sf_dengue <- st_as_sf(df_dengue,
coords = c("Minimum_statistical_area_center_point_X",
"Minimum_statistical_area_center_point_Y"),
crs = 3826)
str(sf_dengue)
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 1,
border.col = "black",
border.lwd = 1)
knitr::opts_chunk$set(echo = TRUE)
Sys.setlocale("LC_CTYPE", "chinese")
packages = c("sp","sf","tidyverse","tmap","jsonlite", "rgdal", "geojsonio", "GISTools")
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
taiwan_ts_map_sf <- st_read(dsn = "data/TAIWAN_TOWNSHIP", layer = "TOWN_MOI_1071226")
taiwan_ts_map_st <- st_transform(taiwan_ts_map_sf,crs=3826)
tmap_mode("view")
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")+
tm_borders(col = "grey40",alpha=0.5)
library(rjson)
df_dengue <- jsonlite::fromJSON("data/dengue_case.json")
str(df_dengue)
# Check for NA values for coordinates
sum(is.na(df_dengue$Minimum_statistical_area_center_point_X))
sum(is.na(df_dengue$Minimum_statistical_area_center_point_Y))
df_dengue<- df_dengue[!is.na(df_dengue$Minimum_statistical_area_center_point_X),]
df_dengue<- df_dengue[!(df_dengue$Minimum_statistical_area_center_point_X == 'None'),]
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
str(df_dengue)
sf_dengue <- st_as_sf(df_dengue,
coords = c("Minimum_statistical_area_center_point_X",
"Minimum_statistical_area_center_point_Y"),
crs = 3826)
str(sf_dengue)
tmap_mode("view")
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.05,
border.col = "black",
border.lwd = 1) +
tm_shape(taiwan_ts_map_st)
tmap_mode("view")
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.1,
border.col = "black",
border.lwd = 1) +
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")
knitr::opts_chunk$set(echo = TRUE)
Sys.setlocale("LC_CTYPE", "chinese")
packages = c("sp","sf","tidyverse","tmap","jsonlite", "rgdal", "geojsonio", "GISTools")
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
taiwan_ts_map_sf <- st_read(dsn = "data/TAIWAN_TOWNSHIP", layer = "TOWN_MOI_1071226")
taiwan_ts_map_st <- st_transform(taiwan_ts_map_sf,crs=3826)
tmap_mode("view")
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")+
tm_borders(col = "grey40",alpha=0.5)
library(rjson)
df_dengue <- jsonlite::fromJSON("data/dengue_case.json")
str(df_dengue)
# Check for NA values for coordinates
sum(is.na(df_dengue$Minimum_statistical_area_center_point_X))
sum(is.na(df_dengue$Minimum_statistical_area_center_point_Y))
df_dengue<- df_dengue[!is.na(df_dengue$Minimum_statistical_area_center_point_X),]
df_dengue<- df_dengue[!(df_dengue$Minimum_statistical_area_center_point_X == 'None'),]
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
str(df_dengue)
sf_dengue <- st_as_sf(df_dengue,
coords = c("Minimum_statistical_area_center_point_X",
"Minimum_statistical_area_center_point_Y"),
crs = 3826)
str(sf_dengue)
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.1,
border.col = "black",
border.lwd = 1)
#tm_shape(taiwan_ts_map_st)+
#    tm_fill(col="TOWNNAME")
tmap_mode('plot')
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.1,
border.col = "black",
border.lwd = 1)
#tm_shape(taiwan_ts_map_st)+
#    tm_fill(col="TOWNNAME")
tmap_mode('plot')
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.1,
border.col = "black",
border.lwd = 1) +
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")
tmap_mode('plot')
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.1,
border.col = "black",
border.lwd = 1) +
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")
tmap_mode('view')
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
df_2018 <- df_dengue %>%
filter(Onset_day[1:4] == "2018")
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
df_2018 <- df_dengue %>%
filter(Onset_day[,1:4] == "2018")
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
df_2018 <- df_dengue %>%
filter(substrLeft(Onset_day,4) == "2018")
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
df_2018 <- df_dengue %>%
filter(substrRight(Onset_day,4) == "2018")
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
df_2018 <- df_dengue %>%
filter(grep1(Onset_day,"2018"))
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
df_2018 <- df_dengue %>%
filter(grepl(Onset_day,"2018"))
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
df_2018 <- df_dengue %>%
filter(grepl("2018", Onset_day))
sf_dengue <- st_as_sf(df_2018,
coords = c("Minimum_statistical_area_center_point_X",
"Minimum_statistical_area_center_point_Y"),
crs = 3826)
str(sf_dengue)
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.1,
border.col = "black",
border.lwd = 1) +
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")
tmap_mode('view')
shiny::runApp()
knitr::opts_chunk$set(echo = TRUE)
Sys.setlocale("LC_CTYPE", "chinese")
packages = c("sp","sf","tidyverse","tmap","jsonlite", "rgdal", "geojsonio", "GISTools")
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
knitr::opts_chunk$set(echo = TRUE)
Sys.setlocale("LC_CTYPE", "chinese")
packages = c("sp","sf","tidyverse","tmap","jsonlite", "rgdal", "geojsonio", "GISTools")
for (p in packages){
if(!require(p, character.only = T)){
install.packages(p)
}
library(p,character.only = T)
}
taiwan_ts_map_sf <- st_read(dsn = "data/TAIWAN_TOWNSHIP", layer = "TOWN_MOI_1071226")
taiwan_ts_map_st <- st_transform(taiwan_ts_map_sf,crs=3826)
tmap_mode("view")
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")+
tm_borders(col = "grey40",alpha=0.5)
library(rjson)
df_dengue <- jsonlite::fromJSON("data/dengue_case.json")
str(df_dengue)
# Check for NA values for coordinates
sum(is.na(df_dengue$Minimum_statistical_area_center_point_X))
sum(is.na(df_dengue$Minimum_statistical_area_center_point_Y))
df_dengue<- df_dengue[!is.na(df_dengue$Minimum_statistical_area_center_point_X),]
df_dengue<- df_dengue[!(df_dengue$Minimum_statistical_area_center_point_X == 'None'),]
#transform(df_dengue, Minimum_statistical_area_center_point_X = as.numeric(Minimum_statistical_area_center_point_X))
df_dengue[, c(10,11,19,23,24)] <- sapply(df_dengue[, c(10,11,19,23,24)], as.numeric)
df_2018 <- df_dengue %>%
filter(grepl("1998", Onset_day))
str(df_dengue)
sf_dengue <- st_as_sf(df_2018,
coords = c("Minimum_statistical_area_center_point_X",
"Minimum_statistical_area_center_point_Y"),
crs = 3826)
str(sf_dengue)
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.1,
border.col = "black",
border.lwd = 1) +
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")
tmap_mode('view')
tm_shape(sf_dengue)+
tm_bubbles(col = "red",
size = 0.1,
border.col = "black",
border.lwd = 1) +
tm_shape(taiwan_ts_map_st)+
tm_fill(col="TOWNNAME")
tmap_mode('plot')
shiny::runApp()
runApp()
runApp()
